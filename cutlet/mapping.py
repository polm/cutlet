HEPBURN = {
    # single characters
    "„ÅÇ": "a",
    "„ÅÑ": "i",
    "„ÅÜ": "u",
    "„Åà": "e",
    "„Åä": "o",
    "„Åã": "ka",
    "„Åç": "ki",
    "„Åè": "ku",
    "„Åë": "ke",
    "„Åì": "ko",
    "„Åå": "ga",
    "„Åé": "gi",
    "„Åê": "gu",
    "„Åí": "ge",
    "„Åî": "go",
    "„Åï": "sa",
    "„Åó": "shi",
    "„Åô": "su",
    "„Åõ": "se",
    "„Åù": "so",
    "„Åñ": "za",
    "„Åò": "ji",
    "„Åö": "zu",
    "„Åú": "ze",
    "„Åû": "zo",
    "„Åü": "ta",
    "„Å°": "chi",
    "„Å§": "tsu",
    "„Å¶": "te",
    "„Å®": "to",
    "„Å†": "da",
    "„Å¢": "zi",
    "„Å•": "zu",
    "„Åß": "de",
    "„Å©": "do",
    "„Å™": "na",
    "„Å´": "ni",
    "„Å¨": "nu",
    "„Å≠": "ne",
    "„ÅÆ": "no",
    "„ÅØ": "ha",
    "„Å≤": "hi",
    "„Åµ": "fu",
    "„Å∏": "he",
    "„Åª": "ho",
    "„Å∞": "ba",
    "„Å≥": "bi",
    "„Å∂": "bu",
    "„Åπ": "be",
    "„Åº": "bo",
    "„Å±": "pa",
    "„Å¥": "pi",
    "„Å∑": "pu",
    "„Å∫": "pe",
    "„ÅΩ": "po",
    "„Åæ": "ma",
    "„Åø": "mi",
    "„ÇÄ": "mu",
    "„ÇÅ": "me",
    "„ÇÇ": "mo",
    "„ÇÑ": "ya",
    "„ÇÜ": "yu",
    "„Çà": "yo",
    "„Çâ": "ra",
    "„Çä": "ri",
    "„Çã": "ru",
    "„Çå": "re",
    "„Çç": "ro",
    "„Çè": "wa",
    "„Çê": "yi",
    "„ÅÜ": "u",
    "„Çë": "ye",
    "„Çí": "wo",
    "„Çì": "n",
    # obsolete / unusual
    "„Çë": "we",
    "„Çê": "wi",
    "„Çî": "vu",
    "„É∏": "vi",
    "„É∑": "va",
    "„Çè„Çô": "va",
    "„Éπ": "ve",
    "„Çë„Çô": "ve",
    "„É∫": "vo",
    "„Çí„Çô": "vo",
    # sutegana
    "„ÇÉ": "ya",
    "„ÇÖ": "yu",
    "„Çá": "yo",
    "„ÅÅ": "a",
    "„ÅÉ": "i",
    "„ÅÖ": "u",
    "„Åá": "e",
    "„Åâ": "o",
    # unusual sutegana
    # These are mostly associated with Ainu or Taiwanese
    # https://ja.wikipedia.org/wiki/%E3%82%A2%E3%82%A4%E3%83%8C%E8%AA%9E%E4%BB%AE%E5%90%8D
    # https://ja.wikipedia.org/wiki/%E5%8F%B0%E6%B9%BE%E8%AA%9E%E4%BB%AE%E5%90%8D
    # These romaji are probably not very good, but are included to avoid errors.
    # Improvements are welcome.
    "„Çï": "ka",
    "„á∞": "k",
    "„Çñ": "ke",
    "„É∂": "ga",
    "„Åì": "ko",
    "„á±": "shi",
    "„á≤": "su",
    "„á≥": "to",
    "„á¥": "nu",
    "„áµ": "ha",
    "„á∂": "hi",
    "„á∑": "fu",
    "„á∏": "he",
    "„áπ": "ho",
    "„á∫": "mu",
    "„áª": "ra",
    "„áº": "ri",
    "„áΩ": "ru",
    "„áæ": "re",
    "„áø": "ro",
    "„Çé": "wa",
    "„á∑„Çö": "p",
    # small kana extension
    "õÖê": "wi",
    "õÖë": "we",
    "õÖí": "wo",
    "õÖ§": "wi",
    "õÖ•": "we",
    "õÖ¶": "wo",
    "õÖß": "n",
    # digraphs
    "„Åó„ÇÉ": "sha",
    "„Åó„ÇÖ": "shu",
    "„Åó„Çá": "sho",
    "„Åò„ÇÉ": "ja",
    "„Åò„ÇÖ": "ju",
    "„Åò„Çá": "jo",
    "„Å°„ÇÉ": "cha",
    "„Å°„ÇÖ": "chu",
    "„Å°„Çá": "cho",
    # symbols
    "„Éº": "-",  # Èï∑Èü≥Á¨¶, only used when repeated
    "„ÄÇ": ".",
    "„ÄÅ": ",",
    "Ôºü": "?",
    "ÔºÅ": "!",
    "„Äå": '"',
    "„Äç": '"',
    "„Äé": '"',
    "„Äè": '"',
    "Ôºö": ":",
    "Ôºà": "(",
    "Ôºâ": ")",
    "„Ää": "(",
    "„Äã": ")",
    "„Äê": "[",
    "„Äë": "]",
    "„Éª": "/",
    "Ôºå": ",",
    # other
    "„Çö": "",  # combining handakuten by itself, just discard
    "„Çô": "",  # combining dakuten by itself
}

KUNREISHIKI = dict(HEPBURN)

KUNREISHIKI["„Åó"] = "si"
KUNREISHIKI["„Åò"] = "zi"
KUNREISHIKI["„Å§"] = "tu"
KUNREISHIKI["„Å°"] = "ti"
KUNREISHIKI["„Åó„ÇÉ"] = "sya"
KUNREISHIKI["„Åó„ÇÖ"] = "syu"
KUNREISHIKI["„Åó„Çá"] = "syo"
KUNREISHIKI["„Åò„ÇÉ"] = "zya"
KUNREISHIKI["„Åò„ÇÖ"] = "zyu"
KUNREISHIKI["„Åò„Çá"] = "zyo"
KUNREISHIKI["„Å°„ÇÉ"] = "tya"
KUNREISHIKI["„Å°„ÇÖ"] = "tyu"
KUNREISHIKI["„Å°„Çá"] = "tyo"
KUNREISHIKI["„Åµ"] = "hu"

NIHONSHIKI = dict(KUNREISHIKI)
NIHONSHIKI["„Å¢"] = "di"
NIHONSHIKI["„Å•"] = "du"

UNVOICED = "„Åã„Åç„Åè„Åë„Åì„Åï„Åó„Åô„Åõ„Åù„Åü„Å°„Å§„Å¶„Å®„ÅØ„Å≤„Åµ„Å∏„Åª"
VOICED = "„Åå„Åé„Åê„Åí„Åî„Åñ„Åò„Åö„Åú„Åû„Å†„Å¢„Å•„Åß„Å©„Å∞„Å≥„Å∂„Åπ„Åº"


def add_dakuten(kk):
    """Given a kana (single-character string), add a dakuten."""
    try:
        ii = UNVOICED.index(kk)
        return VOICED[ii]
    except ValueError:
        # this is normal if the input is nonsense
        return None
